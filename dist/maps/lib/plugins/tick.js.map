{"version":3,"sources":["lib/plugins/tick.js"],"names":[],"mappings":";;AAAA,MAAM,CAAC,OAAO,CAAC,MAAM,GAAC,UAAS,IAAI,EAAE;AACnC,MAAI,CAAC,SAAS,GAAG,CAAC,CAAC;AACnB,MAAI,CAAC,YAAY,GAAG,CAAC,CAAC;;AAGtB,MAAI,CAAC,eAAe,GAAG,UAAA,cAAc,EAAI;AACvC,QAAI,CAAC,gBAAgB,EAAE,CAAC;;AAExB,QAAI,CAAC,YAAY,GAAG,WAAW,CAAC,YAAM;AACpC,UAAI,CAAC,SAAS,EAAE,CAAC;AACjB,UAAM,CAAC,GAAC,IAAI,CAAC,GAAG,EAAE,CAAC;AACnB,UAAI,IAAI,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,YAAY,CAAA,GAAI,IAAI,CAAC;AAC1C,UAAI,IAAI,GAAG,GAAG,EAAE,IAAI,GAAG,CAAC,CAAC;AACzB,UAAI,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;AACxC,UAAI,CAAC,YAAY,GAAG,CAAC,CAAC;KACvB,EAAE,IAAI,GAAC,cAAc,CAAC,CAAC;GACzB,CAAC;;AAEF,MAAI,CAAC,gBAAgB,GAAG,YAAM;AAC5B,QAAI,IAAI,CAAC,YAAY,EAAE,aAAa,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;AACxD,QAAI,CAAC,YAAY,GAAG,IAAI,CAAC;GAC1B,CAAC;;AAGF,MAAI,CAAC,eAAe,CAAC,EAAE,CAAC,CAAC;CAC1B,CAAC","file":"lib/plugins/tick.js","sourcesContent":["module.exports.server=function(serv) {\n  serv.tickCount = 0;\n  serv.lastTickTime = 0;\n\n\n  serv.setTickInterval = ticksPerSecond => {\n    serv.stopTickInterval();\n\n    serv.tickInterval = setInterval(() => {\n      serv.tickCount++;\n      const t=Date.now();\n      let time = (t - serv.lastTickTime) / 1000;\n      if (time > 100) time = 0;\n      serv.emit('tick', time, serv.tickCount);\n      serv.lastTickTime = t;\n    }, 1000/ticksPerSecond);\n  };\n\n  serv.stopTickInterval = () => {\n    if (serv.tickInterval) clearInterval(serv.tickInterval);\n    serv.tickInterval = null;\n  };\n\n\n  serv.setTickInterval(20);\n};\n\n"],"sourceRoot":"/source/"}